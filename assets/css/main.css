/* Design tokens */
:root {
    /* Provided palette */
    --Navy: #1F262E;
    --Light-Green: #619E92;
    --Better-White: #FAFAF8;
    --Royal: #172E4E;
    --Royal-Blue: #2E4769;

    /* Base tokens */
    --c-text: var(--Navy);
    --c-muted: #4F4F4F;
    --c-link: #467265;
    --c-link-hover: var(--Light-Green);
    --c-header-bg: #F4F4F2; /* neutral strip background; navbar uses --nav-bg */
    --c-crumb-bg: var(--Better-White);
    --c-surface: var(--Better-White);
    --c-surface-alt: #F4F4F2;
    --c-border: rgba(31,38,46,.12);
    --c-danger: #DF362D;
    --c-brand-deep: #172E4E;
    --c-brand-slate: #2E4769;

    /* Navbar specific */
    --nav-bg: var(--Navy);
    --nav-link: #ffffff;                /* white text on navy */
    --nav-hover-bg: var(--Royal-Blue);     /* hover background */
    --nav-current-bg: var(--Royal);        /* active section */
    --nav-current-text: var(--Better-White);
    --brand-color: var(--Light-Green);
    --sticky-top: 12px; /* header not sticky; keep sidebars near top */
}

.title {
    color: var(--c-text)
}

.title,
h1,
h3 {
    font-weight: 700
}

.header {
    font-size: 150%
}

h1 {
    font-size: 160%;
    border-top: none
}

h3 {
    font-size: 110%
}

body {
    margin: 0;
    padding: 0;
    font-family: helvetica, arial, freesans, clean, sans-serif;
    *font-size: small;
    color: var(--c-text);
    background: var(--c-surface);
    font-size: 1.01em
}

a {
    text-decoration: none;
    color: var(--c-link)
}

a:hover,
a:focus {
    color: var(--c-link-hover)
}

#content {
    margin: 1em 2em
}

header {
    background: var(--c-header-bg)
}

header a { color: var(--c-link) }

span.tags a {
    margin: .2em;
    padding: .2em;
    font-size: 1.01em;
    background: #e6e6e6;
    color: #000;
    border-style: solid;
    border-width: 1px;
    border-color: #ccc;
    -moz-border-radius: 4px;
    -webkit-border-radius: 4px;
    border-radius: 4px
}

span.tags a:hover {
    background: #ccc;
    color: var(--c-text)
}

body {
    margin: 0;
    line-height: 1.6
}

.container {
    max-width: 1100px;
    margin: 0 auto;
    padding: 0 1rem
}

/* Nudge main content right with a comfortable left margin on wide screens */
@media (min-width: 1200px) {
  main .container {
    margin-left: 10rem; /* ~1.6in at 16px/rem */
    margin-right: 2rem;
    max-width: none;
  }
  .breadcrumbs .container {
    margin-left: 10rem; /* align with article */
    margin-right: 2rem;
    max-width: none;
  }
  .layout article {
    max-width: 80ch; /* comfortable reading width */
  }
}

.site-header nav a {
    margin-right: .75rem
}

.layout {
    display: flex;
    gap: 2.5rem;
    align-items: stretch; /* sidebars and article share full height */
}

.layout article {
    flex: auto;
    min-width: 0
}

/* Remove extra top spacing so first heading aligns with sidebars */
.layout article > h1:first-child { margin-top: 0; }

.layout aside {
    flex: 0 0 260px;
    padding-top: 0; /* top align with article */
    position: sticky;
    top: var(--sticky-top);
    align-self: flex-start;
    height: fit-content;
}

/* Two-side nav structure */
.layout .left { order: 0; }
.layout article { order: 1; }
.layout .right { order: 2; }

/* Homepage news aside (non-sticky) */
aside.home-news { flex: 0 0 300px; position: static; align-self: flex-start; margin-top: 5rem; }
.layout aside.home-news { order: 2; }
.home-news .news-box { background: var(--c-surface-alt); border-radius: 8px; padding: .75rem .9rem; }
.home-news .home-news-list { list-style: none; padding-left: 0; margin: .25rem 0 .5rem; }
.home-news .home-news-list li { margin: .35rem 0; }
.home-news .home-news-list .date { color: var(--c-muted); font-size: .9em; margin-right: .4rem; }
.home-news .more { margin: 0; }

/* News single header pager */
.news-header { margin: 0 0 1.5rem; }
.news-pager { display: flex; align-items: center; font-size: .95em; }
.news-pager .spacer { flex: 1 1 auto; }
.news-pager a { color: var(--c-link); max-width: 48%; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.news-pager a:hover { color: var(--c-link-hover); }

.sidenav h3 { margin-top: 0; }
.sidenav ul { margin: .25rem 0 0; padding-left: 1.1rem; }
.sidenav .current { color: var(--c-text); font-weight: 400; }

/* Left sidenav box and interactive items */
.sidenav-left {
    background: var(--c-surface-alt); /* #F4F4F2 */
    padding: .75rem;
    border-radius: 8px;
    min-height: 100%; /* extend box to bottom of column */
}
.sidenav-left ul { list-style: none; margin: .25rem 0 0; padding-left: 0; }
.sidenav-left li { margin: .35rem 0; }
.sidenav-left a,
.sidenav-left .current {
    display: block;
    padding: .6rem .75rem;
    border-radius: 6px; /* patreon-style box */
    text-decoration: none;
}
.sidenav-left a.pdf-link { position: relative; padding-left: 2rem; }
.sidenav-left a.pdf-link::before {
    content: "";
    position: absolute; left: .6rem; top: 50%; transform: translateY(-50%);
    width: 14px; height: 16px;
    background: currentColor;
    -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path fill=\"%23fff\" d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6Zm1 7V3.5L18.5 9H15Z"/></svg>') no-repeat center / contain;
            mask: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path fill=\"%23fff\" d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6Zm1 7V3.5L18.5 9H15Z"/></svg>') no-repeat center / contain;
}

/* Generic link resource icon (chain link, not external arrow) */
.sidenav-left a.link-link { position: relative; padding-left: 2rem; }
.sidenav-left a.link-link::before {
    content: "ðŸ”—";
    position: absolute; left: .6rem; top: 50%; transform: translateY(-50%);
    font-size: 1rem; line-height: 1; opacity: .9;
}
.sidenav-left a { color: var(--Navy); background: transparent; }
.sidenav-left a:hover,
.sidenav-left a:focus { background: var(--Royal-Blue); color: var(--Better-White); }
.sidenav-left .current { background: var(--Royal); color: var(--Better-White); font-weight: 400; }

/* Section intro header below breadcrumbs */
.section-intro { margin: .75rem 0 1rem; background: transparent; }
.section-intro .section-title { margin: 0; font-size: 1.1rem; color: var(--c-muted); }
.section-intro .section-summary { color: var(--c-muted); }

.toc {
    font-size: .95em
}

.toc h3 {
    margin: .25rem 0
}

/* ToC restyle (Docusaurus-like) */
.sidenav-right .toc { border-left: 2px solid var(--c-border); padding-left: .75rem; }
.sidenav-right .toc nav { border-left: none; padding-left: 0; }
.sidenav-right .toc ul { list-style: none; margin: 0; padding-left: 0; }
/* Indent nested headings */
.sidenav-right .toc ul ul { padding-left: .75rem; }
.sidenav-right .toc li { margin: .25rem 0; }
.sidenav-right .toc a,
.sidenav-right .toc a:visited { color: #000; text-decoration: none; }
.sidenav-right .toc a:hover,
.sidenav-right .toc a:focus { color: var(--Light-Green); }
.sidenav-right .toc a.active { color: var(--c-link); }

.toc ul {
    margin: .25rem 0 0;
    padding-left: 1.1rem
}

.sectionlist h3 {
    margin-top: 1.25rem
}

.sectionlist ul {
    margin: .25rem 0 0;
    padding-left: 1.1rem
}

.seealso ul {
    margin: .25rem 0 0;
    padding-left: 1.1rem;
}

.sectionlist.up-link {
    margin-top: .75rem;
}

.sectionlist.up-link .up-link {
    display: inline-block;
}

.site-header {
    background: var(--nav-bg);
    border-bottom: 1px solid var(--c-border)
}

/* Header spans edge-to-edge */
.site-header .container {
    max-width: none !important;
    width: 100%;
    margin: 0 !important;
    padding-left: 1rem;
    padding-right: 1rem;
}

.site-header .nav-inner {
    display: flex;
    gap: 1rem;
    align-items: center;
    /* less height, allow item background to span full bar */
    padding: 0 1.25rem 0 1rem; /* add a bit more right padding to avoid clipping */
    justify-content: flex-start; /* left-align; we'll push right group with margin-left:auto */
}

.site-header .nav-left {
    display: flex;
    gap: .75rem;
    margin-left: .5rem;
    flex: 0 1 auto;
}

.site-header .nav-right {
    display: flex;
    align-items: center
}

.site-header .patreon-bubble {
    display: inline-block;
    padding: .4rem .6rem;
    border-radius: 6px; /* more square */
    background: #ff424d;
    color: #fff !important;
    font-weight: 400; /* unbold */
    white-space: nowrap; /* prevent clipping at right edge */
}

.site-header .patreon-bubble:hover,
.site-header .patreon-bubble:focus {
    background: #ff5f68;
}

.site-header h1 { font-size: 1.5rem; margin: 0 }

/* Brand: light green text, no box; same color linked or not */
.site-header .brand-label { color: var(--Light-Green) !important; }

/* Mobile nav toggle (burger) */
.nav-toggle { display: none; }
.nav-burger { display: none; cursor: pointer; padding: .25rem; }
.nav-burger span,
.nav-burger span::before,
.nav-burger span::after {
    display: block;
    width: 24px;
    height: 2px;
    background: #fff; /* visible on navy */
    position: relative;
    content: "";
}
.nav-burger span::before { position: absolute; top: -7px; left: 0; }
.nav-burger span::after  { position: absolute; top: 7px; left: 0; }

.site-header a { color: var(--nav-link) }

.site-header nav .nav-item {
    margin-right: .5rem;
    display: inline-block;
    font-weight: 400; /* unbold */
    text-transform: none; /* normal casing */
    padding: .6rem .7rem; /* defines navbar height */
    border-radius: 0;
}

.site-header .nav-left .nav-item.current {
    background: var(--nav-current-bg);
    color: var(--nav-current-text) !important;
    /* White strip inside the item without changing layout */
    box-shadow: inset 0 -3px 0 var(--Better-White);
}

/* Brand color consistent whether linked or not */
.site-header h1 a,
.site-header .brand {
    color: var(--brand-color) !important;
}

.site-header .nav-left .nav-item,
.site-header .nav-left .nav-item:visited {
    color: var(--nav-link);
}

.site-header .nav-left .nav-item:hover,
.site-header .nav-left .nav-item:focus {
    color: #fff;
    background: var(--nav-hover-bg);
    /* White strip on hover without layout shift */
    box-shadow: inset 0 -3px 0 var(--Better-White);
}

/* Right side: auxiliary links */
.site-header .nav-right { gap: .6rem; margin-left: auto; margin-right: 17px; padding-right: 17px; }

/* Ensure brand and sections sit flush to left within container */
.site-header .brand { margin-right: .75rem; }
.site-header .nav-right .aux-link {
    color: var(--Light-Green);
    font-weight: 600;
    padding: .6rem .7rem; /* match navbar item height */
}
.site-header .nav-right .aux-link:hover,
.site-header .nav-right .aux-link:focus { color: #82b8ad; }

/* global link colors already defined earlier */

.breadcrumbs {
    border-bottom: none; /* remove hr-like line under breadcrumbs */
    background: transparent;
    font-size: .95rem
}

.breadcrumbs .container {
    padding: .5rem 1rem
}

.breadcrumbs .sep { margin: 0 .22rem; color: #6b7280 }

/* Breadcrumb home icon alignment */
.breadcrumbs .home-icon { width: 1em; height: 1em; vertical-align: -0.125em; }

.breadcrumbs .current { color: var(--c-text) }

ul {
    margin: .5rem 0 .5rem 1.25rem
}

li {
    margin: .15rem 0
}

li p {
    margin: 0
}

/* News listing cards on section landing */
.news-list {
    display: grid;
    grid-template-columns: 1fr;
    gap: .75rem;
    margin: .5rem 0 0;
    padding: 0;
}

.news-card {
    list-style: none;
    border: 1px solid #e2e8dc;
    background: #fff;
    border-radius: 6px;
    padding: .75rem .9rem;
}

.news-card .news-meta {
    font-size: .9rem;
    color: #6b7280;
    margin-bottom: .15rem;
}

.news-card .news-title {
    font-size: 1rem;
    margin: 0;
}

.feed-links {
    margin: .25rem 0 .5rem;
    color: #6b7280;
    font-size: .95rem;
}

.feed-links .feed-link {
    color: #6b7280;
}

.feed-links .feed-link:hover,
.feed-links .feed-link:focus {
    color: #1a260d;
}

.feed-links .sep { margin: 0 .35rem; color: #9aa1aa; }

/* Code blocks: prevent overflow on narrow screens */
pre {
    display: block;
    max-width: 100%;
    overflow-x: auto;
    overflow-y: hidden;
    -webkit-overflow-scrolling: touch; /* smooth horizontal scroll on mobile */
}

/* Optional: keep code inline blocks from forcing overflow */
code {
    word-break: normal;
}

/* Toggle labels for collapsible merge details */
details summary .summary-open-label { display: none; }
details[open] summary .summary-open-label { display: inline; }
details[open] summary .summary-closed-label { display: none; }

/* Keep native disclosure marker visible and make summary tappable */
details > summary { cursor: pointer; list-style: disclosure-closed; }
details[open] > summary { list-style: disclosure-open; }
details > summary::-webkit-details-marker { display: inline-block; }

/* Emergency banner */
.emergency-banner { 
    border-bottom: 1px solid #e2e8dc; 
}
.emergency-banner .container {
    display: flex;
    align-items: center;
    gap: .75rem;
    padding: .6rem 1rem;
}
.emergency-banner .banner-icon { display: flex; align-items: center; }
.emergency-banner .banner-icon svg { width: 1.1rem; height: 1.1rem; }
.emergency-banner .banner-content { flex: 1 1 auto; }
.emergency-banner .banner-dismiss {
    background: transparent;
    border: 1px solid rgba(0,0,0,.15);
    color: inherit;
    padding: .25rem .5rem;
    border-radius: 4px;
    cursor: pointer;
}
.emergency-banner .banner-dismiss:hover,
.emergency-banner .banner-dismiss:focus { background: rgba(255,255,255,.2); }
.emergency-banner.hidden { display: none; }
/* Levels */
.emergency-banner.level-info    { background: #eef6ff; color: #0b3a6f; }
.emergency-banner.level-warning { background: #fff8e6; color: #5b3b00; }
.emergency-banner.level-danger  { background: #ffebee; color: #6f0b1a; }

/* Mobile layout adjustments (collapse sooner to avoid crowding) */
@media (max-width: 1100px) {
  .site-header .nav-inner { flex-wrap: wrap; align-items: center; }
  .nav-burger { display: inline-flex; }
  .site-header .nav-left,
  .site-header .nav-right { display: none; width: 100%; }
  .nav-toggle:checked ~ .nav-left { display: flex; flex-direction: column; gap: .5rem; margin-top: .25rem; }
  .nav-toggle:checked ~ .nav-right { display: block; margin-top: .5rem; }
  .site-header .nav-left .nav-item { margin-right: 0; }

  .layout { flex-direction: column; gap: 1.25rem; }
  .layout aside { order: 2; padding-top: 0; }
  /* Hide TOC on mobile; placing it under content isn't useful */
  .layout aside .toc { display: none; }
}

.feed-links {
    margin: .25rem 0 .5rem;
    color: #6b7280;
    font-size: .95rem;
}

.feed-links .feed-link {
    color: #6b7280;
}

.feed-links .feed-link:hover,
.feed-links .feed-link:focus {
    color: #1a260d;
}

.feed-links .sep { margin: 0 .35rem; color: #9aa1aa; }
/* Reduce list indent inside news articles only */
.section-news .layout article ul {
    margin-left: 0;
    padding-left: 1rem; /* minimal to show bullet nicely */
}
